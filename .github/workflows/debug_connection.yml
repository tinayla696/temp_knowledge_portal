name: Debug Connection
on: [workflow_dispatch] # 手動実行ボタンのみで起動

jobs:
  check-connection:
    runs-on: ubuntu-latest
    steps:
      - name: Test Access with PAT
        env:
          MY_PAT: ${{ secrets.PROJECT_REPO_PAT }}
        run: |
          if [ -z "$MY_PAT" ]; then
            echo "::error::Secret [PROJECT_REPO_PAT] is EMPTY or NOT FOUND."
            exit 1
          else
            echo "Secret is set (Length: ${#MY_PAT})"
          fi

          echo "Trying to access child repository..."
          git ls-remote https://$MY_PAT@github.com/Advanced-Develop-2nd/ftp_data_transfer_py.git HEAD